<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<div class="item" id="scenario1Output">
    Magnetic North: <a id="txtMagNorth">no data</a>
    <br />
    True North: <a id="txtTrueNorth">no data</a>
</div>

<script type="text/javascript">
    // For an introduction to the Blank template, see the following documentation:
    // http://go.microsoft.com/fwlink/p/?linkid=232509
    (function () {
        "use strict";
        var compass;

        var app = WinJS.Application;

        // This function is invoked within onDataChanged to
        // retrieve the given identifier from the HTML document.
        function id(elementId) {
            return document.getElementById(elementId);
        }

        // This function is called each time a compass event
        // is fired by the driver.
        function onDataChanged(e) {
            var reading = e.reading;
            id('txtMagNorth').innerHTML = reading.headingMagneticNorth.toFixed(2);
            if (reading.headingTrueNorth != null) {
                id('txtTrueNorth').innerHTML = reading.headingTrueNorth.toFixed(2);
            }
        }

        // This function responds to all app activations.
        app.onactivated = function (eventObject) {
            if (eventObject.detail.kind === Windows.ApplicationModel.Activation.ActivationKind.launch) {
                // Retrieve the default compass and
                compass = Windows.Devices.Sensors.Compass.getDefault();

                // Choose a report interval supported by the sensor
                var minimumReportInterval = compass.minimumReportInterval;
                var reportInterval = minimumReportInterval > 16 ? minimumReportInterval : 16;
                compass.reportInterval = reportInterval;

                // Establish the event handler
                compass.addEventListener("readingchanged", onDataChanged);
                WinJS.UI.processAll();
            }
        };

        app.start();
    })();

</script>
</body>
</html>